
@using ThirtyOne.Web.Helpers
@using ThirtyOne.Shared.Helpers
@model GameViewModel
@{
    ViewData["Title"] = "Thirty One - Playing Game";
}
<div class="container">
    <div class="row">
        <div class="col-md-7">
            <h3>Table</h3>

            <div class="row cardtable">
                <a href="@Url.Action("DrawFromDeck", "Game", new {Id = Model.CurrentGame.GameId })">
                    <img src="~/images/Cards/back.png" class="playingcard selectablecard" />
                </a>
                <a href="@Url.Action("DrawFromTable", "Game", new {Id = Model.CurrentGame.GameId })">
                    <img src="~/images/Cards/@Model.CurrentGame.Table.Last().FileName()" class="playingcard selectablecard" />
                </a>
                @if (!Model.CurrentGame.Players.Any(p => p.HasKnocked))
                {
                    <a href="@Url.Action("Knock", "Game")">
                        <img src="~/images/knock.png" class="playingcard selectablecard" />
                    </a>
                }


            </div>


            <h3>Your hand (@Model.CurrentPlayer.Hand.CalculateScore() points)</h3>

            <div class="row">
                @foreach (var c in Model.CurrentPlayer.Hand)
                {
                    <a href="@Url.Action("DropCard", "Game", new {Id = Model.CurrentGame.GameId })">
                        <img src="~/images/Cards/@c.FileName()" class="playingcard" />
                    </a>
                 }

                </div>
        </div>
        <div class="col-md-5">
            <h1 class="display-4">Your turn</h1>

            @if (!string.IsNullOrEmpty(Model.CurrentPlayer.LastAction))
            {
                <p class="lead">You @Model.CurrentPlayer.LastAction</p>
            }
            <hr />
            <partial name="_PlayerList" model="Model.CurrentGame" />

        </div>

    </div>
</div>